#!/bin/bash

##### Logistic regression #####
# Creare variabile d'ambiente $WEKA con
# export WEKA=/path/to/weka.jar

#INPUT_FILE=input_towekaformat_final.arff

mkdir new_classif
mkdir new_classif/all/
mkdir new_classif/all_postprop/
mkdir new_classif/all_social/
mkdir new_classif/all_affect/

INPUT_FILE=${1}


REMOVE_COMMAND_LIST=(
				"weka.filters.unsupervised.attribute.Remove -R 2-13,15,18,26,31-34 -V" # All
				"weka.filters.unsupervised.attribute.Remove -R 5,8-13,15,18,26,32-34 -V" # All - Post Properties
				"weka.filters.unsupervised.attribute.Remove -R 2-7,12,13,15,18,26,31,33,34 -V" # All - Social Factors
				"weka.filters.unsupervised.attribute.Remove -R 2-11,31,32 -V" # All - Affect
					)

MODEL_FILE=(
				new_classif/all/Logistic.model
				new_classif/all_postprop/Logistic.model
				new_classif/all_social/Logistic.model
				new_classif/all_affect/Logistic.model
			)

STATIST_FILE=(
				new_classif/all/Logistic.stat
				new_classif/all_postprop/Logistic.stat
				new_classif/all_social/Logistic.stat
				new_classif/all_affect/Logistic.stat
			)

CLASSIF_FILE=(
				new_classif/all/Logistic.classif.csv
				new_classif/all_postprop/Logistic.classif.csv
				new_classif/all_social/Logistic.classif.csv
				new_classif/all_affect/Logistic.classif.csv
			)

echo "Processing ${1}"

for i in `seq 0 3`;
        do
                java -cp $WEKA weka.classifiers.meta.FilteredClassifier -F "${REMOVE_COMMAND_LIST[i]}" -c 5 -split-percentage 70  -t ${INPUT_FILE}  -d ${MODEL_FILE[i]} > ${STATIST_FILE[i]} -W "weka.classifiers.functions.Logistic" -- -R 0

		java -cp $WEKA weka.classifiers.meta.FilteredClassifier -F "${REMOVE_COMMAND_LIST[i]}" -c 5 -split-percentage 70  -t ${INPUT_FILE} -classifications "weka.classifiers.evaluation.output.prediction.CSV -p first-last -file ${CLASSIF_FILE[i]} -suppress" -W "weka.classifiers.functions.Logistic" -- -R 0
        done


#####  END Logistic regression #####
