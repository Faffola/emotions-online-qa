#!/bin/bash

##### SVM #####
#INPUT_FILE=input_towekaformat_final.arff
INPUT_FILE=${1}

REMOVE_COMMAND_LIST=(
				"weka.filters.unsupervised.attribute.Remove -R 1,3-4,8-32"		# SVM "Post properties"
				"weka.filters.unsupervised.attribute.Remove -R 1,2,6-32"		# SVM "Time"
				"weka.filters.unsupervised.attribute.Remove -R 1,2-4,6-31"		# SVM "Topic"
				"weka.filters.unsupervised.attribute.Remove -R 1,2-4,6,7,13-32"	# SVM "Social"
				"weka.filters.unsupervised.attribute.Remove -R 1,2-4,6-12,32"	# SVM "Affect"
				"weka.filters.unsupervised.attribute.Remove -R 1,8-32"			# SVM "Post properties" + "Time"
				"weka.filters.unsupervised.attribute.Remove -R 1,8-31"			# SVM "Post properties" + "Time" + "Topic"
				"weka.filters.unsupervised.attribute.Remove -R 1,13-31"			# SVM "Post properties" + "Time" + "Topic" + "Social"  (aka Control model)
				"weka.filters.unsupervised.attribute.Remove -R 1"				# SVM "Post properties" + "Time" + "Topic" + "Social" + "Affect"  (aka Control model + Affect)
					)

MODEL_FILE=(
				weka_classif/post_prop/SVM.model
				weka_classif/time/SVM.model
				weka_classif/topic/SVM.model
				weka_classif/social/SVM.model
				weka_classif/affect/SVM.model
				weka_classif/postprop_time/SVM.model
				weka_classif/postprop_time_topic/SVM.model
				weka_classif/postprop_time_topic_social/SVM.model
				weka_classif/postprop_time_topic_social_affect/SVM.model
			)

STATIST_FILE=(
				weka_classif/post_prop/SVM.stat
				weka_classif/time/SVM.stat
				weka_classif/topic/SVM.stat
				weka_classif/social/SVM.stat
				weka_classif/affect/SVM.stat
				weka_classif/postprop_time/SVM.stat
				weka_classif/postprop_time_topic/SVM.stat
				weka_classif/postprop_time_topic_social/SVM.stat
				weka_classif/postprop_time_topic_social_affect/SVM.stat
			)

CLASSIF_FILE=(
				weka_classif/post_prop/SVM.classif.csv
				weka_classif/time/SVM.classif.csv
				weka_classif/topic/SVM.classif.csv
				weka_classif/social/SVM.classif.csv
				weka_classif/affect/SVM.classif.csv
				weka_classif/postprop_time/SVM.classif.csv
				weka_classif/postprop_time_topic/SVM.classif.csv
				weka_classif/postprop_time_topic_social/SVM.classif.csv
				weka_classif/postprop_time_topic_social_affect/SVM.classif.csv
			)

echo "Processing ${1}"

for i in `seq 0 8`;
        do
				java -cp $WEKA weka.classifiers.meta.FilteredClassifier -F "${REMOVE_COMMAND_LIST[i]}" -c 5 -split-percentage 70  -t ${INPUT_FILE} -d ${MODEL_FILE[i]} -W "weka.classifiers.functions.SMO" -- -K weka.classifiers.functions.supportVector.PolyKernel > ${STATIST_FILE[i]}
                
				java -cp $WEKA weka.classifiers.meta.FilteredClassifier -F "${REMOVE_COMMAND_LIST[i]}" -c 5 -split-percentage 70  -t ${INPUT_FILE} -classifications "weka.classifiers.evaluation.output.prediction.CSV -p first-last -file ${CLASSIF_FILE[i]} -suppress" -W "weka.classifiers.functions.SMO" -- -K weka.classifiers.functions.supportVector.PolyKernel
        done

##### END SVM #####
